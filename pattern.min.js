(function(m){function j(a,f){throw new SyntaxError(""+a+" at "+f);}var k=function(a){this.value=a};k.prototype.getValue=function(){return this.value};var l=function(a){this.key=a};l.prototype.getValue=function(a){return a[this.key]};var g=function(a){if(this instanceof g){var f,b,c,e,d,h=[];f=a.length;e=!1;for(b=d=0;b<f;b+=1)c=a.charAt(b),"{"===c?(!1!==e&&j("Nested opening brace",b),e=!0,d+=1):"}"===c?(!0!==e&&j("Unmatched closing brace",b),e=!1,d+=1):h.push({sid:d,val:c,sub:e});!1!==e&&j("Unclosed opening brace",
b);f=[];b=h.length;if(0!==b){a="";for(d=0;d<b;d+=1)if(e=h[d],a+=e.val,c=h[d+1],!c||c.sid!==e.sid)f.push(e.sub?new l(a):new k(a)),a=""}this.symbols=f}else return new g(a)};g.prototype.build=function(a){var f,b,c;b="";f=this.symbols.length;for(c=0;c<f;c+=1)b+=this.symbols[c].getValue(a);return b};m.Pattern=g})(window);