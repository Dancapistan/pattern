(function(m){function j(a,c){throw new SyntaxError(a+" at "+c);}var k=function(a){this.value=a};k.prototype.getValue=function(){return this.value};var l=function(a){this.key=a};l.prototype.getValue=function(a){return a[this.key]};var g=function(a){if(this instanceof g){var c,b,e,f,d,h=[];e=a.length;b=!1;for(d=c=0;d<e;d+=1)f=a.charAt(d),"{"===f?(!1!==b&&j("Nested opening brace",d),b=!0,c+=1):"}"===f?(!0!==b&&j("Unmatched closing brace",d),b=!1,c+=1):h.push({sid:c,val:f,sub:b});!1!==b&&j("Unclosed opening brace",
d);b=h.length;c=[];if(0!==b){a="";for(d=0;d<b;d+=1)if(f=h[d],a+=f.val,e=h[d+1],!e||e.sid!==f.sid)c.push(f.sub?new l(a):new k(a)),a=""}this.symbols=c}else return new g(a)};g.prototype.build=function(a){var c,b,e;b="";c=this.symbols.length;for(e=0;e<c;e+=1)b+=this.symbols[e].getValue(a);return b};m.Pattern=g})(window);